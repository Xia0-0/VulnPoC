# CVE-2020-11022/CVE-2020-11023 JQuery-XSS漏洞

---
## 漏洞描述

### 漏洞描述 

在大于或等于 1.2 且在 3.5.0 之前的 JQuery 版本中，即使执行了消毒（sanitize）处理，也仍会执行将来自不受信任来源的 HTML 传递给 jQuery 的 DOM 操作方法（即 html()、.append() 等），从而导致 xss 漏洞。

### 受影响版本  

1.2 <=JQuery< 3.5.0

---


---

## 漏洞分析

原作者分析博客  
https://mksben.l0.cm/2020/05/jquery3.5.0-xss.html

1. **原理**  

   - CVE-2020-11022 ：jQuery 的 $.htmlPrefilter() 方法在处理用户提供的 HTML 内容时，使用的正则表达式过滤并不严格，导致攻击者可以构造特殊的输入绕过过滤，从而将恶意代码注入到页面中，进而触发 XSS 攻击。（POC 1和2）
   - CVE-2020-11023：在 jQuery 为防范 CVE-2020-11022 漏洞而将 $.htmlPrefilter() 替换成简单标识函数的修复方案中，仍存在一个绕过漏洞。也就是说，攻击者可以利用某些特殊的 HTML 标签特性或浏览器解析行为，绕过这个修复，从而注入恶意代码，实现 XSS 攻击。（POC 3）
   
2. **可能影响**  
   - XSS（跨站脚本攻击）

3. **修复建议**  
   - 升级到 3.5.0 或更高版本。  
   - 使用XSS清理工具清理用户输入的HTML，
   官方推荐：DOMPurify
   https://github.com/cure53/DOMPurify

### PoC

1. <style><style /><img src=x onerror=alert(1)> 

2. <img alt="<x" title="/><img src=x onerror=alert(1)>">

3. <option><style></option></select><img src=x onerror=alert(1)></style>

---

## 漏洞复现

此漏洞原作者搭建了在线环境，内置了三个xss poc。
https://mksben.l0.cm/2020/05/jquery3.5.0-xss.html

偷个懒，不在本地复现了。

---

---
## 个人吐槽及相关技术学习：

jQuery之前做网页添加动画时用到过，但也不熟，边漏洞复现边学习下。

jQuery 是一个 JavaScript 库,个人理解就是类似python导入的库一般，用来处理对元素的操作，比如添加、删除、修改等.

发现了漏洞，利用漏洞也是个大问题，草淡雅。

感觉这个漏洞还没吃透，算了，慢慢来吧。

---

## 参考连接：
1. https://cloud.tencent.com/developer/article/1638163

2. 和前面的。
